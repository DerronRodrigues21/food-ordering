<?php include 'config.php'; if (!isset($_SESSION['customer_id'])) { header('Location: index.php'); exit; } $cid = $_SESSION['customer_id']; ?> <!doctype html><html><head><meta charset="utf-8"><title>Your Orders</title><link rel="stylesheet" href="style.css"></head><body><div class="container"><div class="card" style="max-width:800px;margin:40px auto"><h3>Your Orders</h3><?php $res = $conn->query("SELECT o.*, r.name AS restaurant FROM `Order` o JOIN Restaurant r ON o.restaurant_id=r.restaurant_id WHERE o.customer_id=$cid ORDER BY o.order_date DESC"); if ($res->num_rows == 0) echo '<div class="small">No orders yet</div>'; while($o=$res->fetch_assoc()){ echo '<div style="padding:12px;border-bottom:1px solid #f1f1f1"><strong>Order #'.$o['order_id'].'</strong> • '.$o['status'].' • Rs '.$o['total_amount'].'<br><small class="small">'.$o['restaurant'].' • '.$o['order_date'].'</small>'; $it = $conn->query("SELECT mi.name, oi.quantity FROM Order_Item oi JOIN Menu_Item mi ON oi.item_id=mi.item_id WHERE oi.order_id=".$o['order_id']); echo '<ul>'; while($itc=$it->fetch_assoc()){ echo '<li>'.$itc['name'].' x'.$itc['quantity'].'</li>'; } echo '</ul></div>'; } ?></div></div></body></html>